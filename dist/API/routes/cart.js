"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(o,a){try{var u=r[o](a),c=u.value}catch(e){return void t(e)}return u.done?void e(c):Promise.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}var _cartModel=require("../model/cartModel.js"),_cartModel2=_interopRequireDefault(_cartModel),express=require("express"),router=express.Router();router.get("/getCart",function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t,n){var o,a,u,c,i,s,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o="SELECT * FROM _cart inner join _cart_product on _cart_product.cart_id = _cart.cart_id where user_id = ?",a=r.get("Authorization")||"",u=new _cartModel2.default(r.body,n,a,o),e.next=5,u.checkCartExist();case 5:if(c=e.sent,!c.success){e.next=12;break}console.log("HERE"),console.log("DATA",c.data),t.json(c.data),e.next=19;break;case 12:return i="insert into _cart SET user_id=?",s=new _cartModel2.default(r.body,n,a,i),e.next=16,s.createCart();case 16:d=e.sent,t.json(d),console.log("CREATED",d);case 19:case"end":return e.stop()}},e,void 0)}));return function(r,t,n){return e.apply(this,arguments)}}()),module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlcy9jYXJ0LmpzIl0sIm5hbWVzIjpbIl9jYXJ0TW9kZWwiLCJyZXF1aXJlIiwiZXhwcmVzcyIsInJvdXRlciIsIlJvdXRlciIsImdldCIsIl9yZWYiLCJfYXN5bmNUb0dlbmVyYXRvciIsInJlZ2VuZXJhdG9yUnVudGltZSIsIm1hcmsiLCJfY2FsbGVlIiwicmVxIiwicmVzIiwibmV4dCIsImVtYWlsQ2hlY2tTUUwiLCJ0b2tlbiIsIk1vZGVsIiwiY2FydEV4aXN0IiwiY3JlYXRlQ2FydFNRTCIsIkNyZWF0ZUNhcnRNb2RlbCIsImNyZWF0ZWRDYXJ0Iiwid3JhcCIsIl9jb250ZXh0IiwicHJldiIsIl9jYXJ0TW9kZWwyIiwiZGVmYXVsdCIsImJvZHkiLCJjaGVja0NhcnRFeGlzdCIsInNlbnQiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsImpzb24iLCJjcmVhdGVDYXJ0Iiwic3RvcCIsInVuZGVmaW5lZCIsIl94IiwiX3gyIiwiX3gzIiwiYXBwbHkiLCJ0aGlzIiwiYXJndW1lbnRzIl0sIm1hcHBpbmdzIjoia1lBRUEsR0FBQUEsWUFBQUMsUUFBQSx3RUFGSUMsUUFBVUQsUUFBUSxXQUNsQkUsT0FBU0QsUUFBUUUsUUFHckJELFFBQU9FLElBQUksV0FBWCxXQUFBLEdBQUFDLEdBQUFDLGtCQUFBQyxtQkFBQUMsS0FBdUIsUUFBQUMsR0FBT0MsRUFBS0MsRUFBS0MsR0FBakIsR0FBQUMsR0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsQ0FBQSxPQUFBWixvQkFBQWEsS0FBQSxTQUFBQyxHQUFBLE9BQUEsT0FBQUEsRUFBQUMsS0FBQUQsRUFBQVQsTUFBQSxJQUFBLEdBQUEsTUFDakJDLEdBQWdCLDBHQUNoQkMsRUFBUUosRUFBSU4sSUFBSSxrQkFBb0IsR0FDcENXLEVBQVEsR0FBQVEsYUFBQUMsUUFBY2QsRUFBSWUsS0FBTWIsRUFBTUUsRUFBT0QsR0FINUJRLEVBQUFULEtBQUEsRUFJQ0csRUFBTVcsZ0JBSlAsS0FBQSxHQUFBLEdBSWpCVixFQUppQkssRUFBQU0sTUFKbkIxQixFQUFVRCxRQUlTLENBQUFxQixFQUFBVCxLQUFBLEVBQUEsT0FIbkJWLFFBQUFBLElBQVNELFFBV1QyQixRQUFRQyxJQUFJLE9BQVFiLEVBQVVjLE1BQzlCbkIsRUFBSW9CLEtBQUtmLEVBQVVjLE1BVEFULEVBQUFULEtBQUEsRUFBQSxNQUFBLEtBQUEsSUFBQSxNQUF2QkssR0FBQSxrQ0FBdUJDLEVBQUEsR0FBQUssYUFBQUMsUUFBQWQsRUFBQWUsS0FBQWIsRUFBQUUsRUFBQUcsR0FBQUksRUFBQVQsS0FBQSxHQUFBTSxFQUFBYyxZQUFBLEtBQUEsSUFBQWIsRUFBQUUsRUFBQU0sS0FBQWhCLEVBQUFvQixLQUFBWixHQUFBUyxRQUFBQyxJQUFBLFVBQUFWLEVBQUEsS0FBQSxJQUFBLElBQUEsTUFBQSxNQUFBRSxHQUFBWSxTQUFBeEIsRUFBQXlCLFVBQXZCLE9BQUEsVUFBQUMsRUFBQUMsRUFBQUMsR0FBQSxNQUFBaEMsR0FBQWlDLE1BQUFDLEtBQUFDLGdCQUdNekIsT0FBQUEsUUFIaUJiIiwiZmlsZSI6InJvdXRlcy9jYXJ0LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG52YXIgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbmltcG9ydCBDYXJ0TW9kZWwgZnJvbSAnLi4vbW9kZWwvY2FydE1vZGVsLmpzJztcblxucm91dGVyLmdldCgnL2dldENhcnQnLCBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgdmFyIGVtYWlsQ2hlY2tTUUwgPSAnU0VMRUNUICogRlJPTSBfY2FydCBpbm5lciBqb2luIF9jYXJ0X3Byb2R1Y3Qgb24gX2NhcnRfcHJvZHVjdC5jYXJ0X2lkID0gX2NhcnQuY2FydF9pZCB3aGVyZSB1c2VyX2lkID0gPyc7XG4gIHZhciB0b2tlbiA9IHJlcS5nZXQoJ0F1dGhvcml6YXRpb24nKSB8fCBcIlwiO1xuICB2YXIgTW9kZWwgPSBuZXcgQ2FydE1vZGVsKHJlcS5ib2R5LCBuZXh0LCB0b2tlbiwgZW1haWxDaGVja1NRTCk7XG4gIHZhciBjYXJ0RXhpc3QgPSBhd2FpdCBNb2RlbC5jaGVja0NhcnRFeGlzdCgpO1xuXG4gIGlmIChjYXJ0RXhpc3Quc3VjY2Vzcykge1xuICAgIGNvbnNvbGUubG9nKFwiSEVSRVwiKTtcbiAgICBjb25zb2xlLmxvZyhcIkRBVEFcIiwgY2FydEV4aXN0LmRhdGEpO1xuICAgIHJlcy5qc29uKGNhcnRFeGlzdC5kYXRhKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3JlYXRlQ2FydFNRTCA9ICdpbnNlcnQgaW50byBfY2FydCBTRVQgdXNlcl9pZD0/JztcbiAgICB2YXIgQ3JlYXRlQ2FydE1vZGVsID0gbmV3IENhcnRNb2RlbChyZXEuYm9keSwgbmV4dCwgdG9rZW4sIGNyZWF0ZUNhcnRTUUwpO1xuICAgIGNvbnN0IGNyZWF0ZWRDYXJ0ID0gYXdhaXQgQ3JlYXRlQ2FydE1vZGVsLmNyZWF0ZUNhcnQoKTtcbiAgICByZXMuanNvbihjcmVhdGVkQ2FydCk7XG4gICAgY29uc29sZS5sb2coXCJDUkVBVEVEXCIsIGNyZWF0ZWRDYXJ0KTtcbiAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuIl19

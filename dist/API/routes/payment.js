"use strict";var express=require("express"),router=express.Router(),config=require("../db/config.js"),secret=require("../jwtSecret.js"),jwt=require("jsonwebtoken");router.post("/createPayment",function(e,r){var t=e.get("Authorization")||"",o=(jwt.verify(t,secret),require("stripe")(config.stripeSecret)),n="gbp",c=e.body,s=c.amount,i=c.description;o.tokens.create({card:{number:"4000058260000005",exp_month:12,exp_year:2018,cvc:"123"}}).then(function(e){return console.log("created token",e),o.charges.create({amount:s,currency:n,description:i,source:e.id})}).then(function(e){console.log("response from stripe",e),r.json(e)}).catch(function(e){console.log("error",e)})}),module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlcy9wYXltZW50LmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiY29uZmlnIiwiand0IiwicmVxIiwicmVzIiwicG9zdCIsImdldCIsImRlY29kZWQiLCJ2ZXJpZnkiLCJhdXRoVG9rZW4iLCJzZWNyZXQiLCJjdXJyZW5jeSIsIl9yZXEkYm9keSIsInN0cmlwZVNlY3JldCIsInN0cmlwZSIsInRva2VucyIsImFtb3VudCIsImRlc2NyaXB0aW9uIiwiZXhwX21vbnRoIiwiZXhwX3llYXIiLCJjcmVhdGUiLCJ0aGVuIiwidG9rZW4iLCJjb25zb2xlIiwibG9nIiwiY2hhcmdlcyIsImlkIiwicmVzcG9uc2UiLCJzb3VyY2UiLCJlcnJvciIsIm1vZHVsZSIsImNhdGNoIl0sIm1hcHBpbmdzIjoiWUFBQSxJQUFJQSxTQUFVQyxRQUFRLFdBQ2xCQyxPQUFTRixRQUFRRyxTQURqQkgsT0FBQUEsUUFBVUMsbUJBQ1ZDLE9BQVNGLFFBQVFHLG1CQUNqQkMsSUFBQUEsUUFBU0gsZUFFYkMsUUFBSUcsS0FBTUosaUJBQVEsU0FBQUssRUFBbEJDLEdBRUFMLEdBQU9NLEdBQUtGLEVBQUFHLElBQWtCLGtCQUFjLEdBR3BDQyxHQUFVTCxJQUFJTSxPQUFPQyxFQUFXQyxRQUF0QlIsUUFBSU0sVUFBT0MsT0FBV0MsZUFHOUJDLEVBQVcsTUFSckJDLEVBT21DWCxFQUFPWSxLQUFsQ0MsRUFQUkYsRUFPUUUsT0FBU2hCLEVBUGpCYyxFQU9pQmQsV0FMMkJnQixHQUFBQyxPQU9SWixRQUF4QmEsTUFBUUMsT0FQd0IsbUJBWWxDQyxVQUFhLEdBQ2JDLFNBQVksS0FKWEosSUFBT0ssU0FFUkMsS0FBQSxTQUFBQyxHQUVBLE1BREFDLFNBQUFDLElBQUEsZ0JBRklGLEdBR0pSLEVBQVlXLFFBSFJMLFFBSUpKLE9BQUFBLEVBSklMLFNBQUFBLEVBTURNLFlBQUFBLEVBQ1BNLE9BQVlELEVBQUFJLE9BRVJWLEtBQUFBLFNBQUFBLEdBQ0FMLFFBQUFBLElBQUFBLHVCQUZ5QmdCLEdBR3pCVixFQUFBQSxLQUFBQSxLQUNBVyxNQUFRTixTQUFBQSxHQUpaQyxRQUFBQyxJQUFBLFFBQUFLLE9BU0RDLE9BQUdDLFFBQU9oQyIsImZpbGUiOiJyb3V0ZXMvcGF5bWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG52YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vZGIvY29uZmlnLmpzJyk7XG52YXIgc2VjcmV0ID0gcmVxdWlyZSgnLi4vand0U2VjcmV0LmpzJyk7XG52YXIgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG5cbnJvdXRlci5wb3N0KCcvY3JlYXRlUGF5bWVudCcsIChyZXEsIHJlcykgPT4ge1xuXG4gICAgY29uc3QgYXV0aFRva2VuID0gcmVxLmdldCgnQXV0aG9yaXphdGlvbicpIHx8IFwiXCI7XG4gICAgdmFyIGRlY29kZWQgPSBqd3QudmVyaWZ5KGF1dGhUb2tlbiwgc2VjcmV0KTtcblxuICAgIHZhciBzdHJpcGUgPSByZXF1aXJlKFwic3RyaXBlXCIpKGNvbmZpZy5zdHJpcGVTZWNyZXQpO1xuICAgIGNvbnN0IGN1cnJlbmN5ID0gXCJnYnBcIjtcbiAgICBjb25zdCB7IGFtb3VudCwgZGVzY3JpcHRpb24gfSA9IHJlcS5ib2R5O1xuXG4gICAgc3RyaXBlLnRva2Vucy5jcmVhdGUoe1xuICAgICAgICBjYXJkOiB7XG4gICAgICAgICAgXCJudW1iZXJcIjogJzQwMDAwNTgyNjAwMDAwMDUnLFxuICAgICAgICAgIFwiZXhwX21vbnRoXCI6IDEyLFxuICAgICAgICAgIFwiZXhwX3llYXJcIjogMjAxOCxcbiAgICAgICAgICBcImN2Y1wiOiAnMTIzJ1xuICAgICAgICB9XG4gICAgfSkudGhlbiggKHRva2VuKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnY3JlYXRlZCB0b2tlbicsIHRva2VuKTtcbiAgICAgIHJldHVybiBzdHJpcGUuY2hhcmdlcy5jcmVhdGUoe1xuICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICBjdXJyZW5jeSxcbiAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICBzb3VyY2U6IHRva2VuLmlkXG4gICAgICB9KVxuICAgIH0gKS50aGVuKCAocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdyZXNwb25zZSBmcm9tIHN0cmlwZScsIHJlc3BvbnNlKTtcbiAgICAgIHJlcy5qc29uKHJlc3BvbnNlKTtcbiAgICB9ICkuY2F0Y2goIChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgZXJyb3IpO1xuICAgIH0gKVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuIl19

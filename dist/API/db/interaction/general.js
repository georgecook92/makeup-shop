"use strict";function _asyncToGenerator(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(o,a){try{var s=r[o](a),c=s.value}catch(e){return void t(e)}return s.done?void e(c):Promise.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}Object.defineProperty(exports,"__esModule",{value:!0});var standardUpdateQuery=exports.standardUpdateQuery=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t,n,o,a){var s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=jwt.verify(o,secret),e.next=4,pool.getConnection();case 4:return c=e.sent,e.next=7,c.query(r,t);case 7:if(u=e.sent,!(u.affectedRows>0)){e.next=17;break}if(!(u.changedRows>0)){e.next=14;break}c.connection.release(),a.json({success:!0}),e.next=15;break;case 14:throw new Error("No Change");case 15:e.next=18;break;case 17:throw new Error("ID Not Found");case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0),n(e.t0);case 24:case"end":return e.stop()}},e,this,[[0,20]])}));return function(r,t,n,o,a){return e.apply(this,arguments)}}(),standardGetQuery=exports.standardGetQuery=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t,n,o,a){var s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=jwt.verify(o,secret),e.next=4,pool.getConnection();case 4:return c=e.sent,e.next=7,c.query(r,t);case 7:if(u=e.sent,!(u.length>0)){e.next=12;break}a.json(u),e.next=13;break;case 12:throw new Error("ID Not Found");case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),n(e.t0);case 19:case"end":return e.stop()}},e,this,[[0,15]])}));return function(r,t,n,o,a){return e.apply(this,arguments)}}(),pool=require("../connect.js"),jwt=require("jsonwebtoken"),secret=require("../../general/jwtSecret.js");
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiL2ludGVyYWN0aW9uL2dlbmVyYWwuanMiXSwibmFtZXMiOlsiX2NhbGxlZSIsIlNRTCIsImRhdGEiLCJuZXh0IiwidG9rZW4iLCJyZXMiLCJkZWNvZGVkIiwiY29ubmVjdGlvbiIsInJlc3VsdCIsInJlZ2VuZXJhdG9yUnVudGltZSIsIndyYXAiLCJfY29udGV4dCIsInByZXYiLCJqd3QiLCJ2ZXJpZnkiLCJzZWNyZXQiLCJwb29sIiwiZ2V0Q29ubmVjdGlvbiIsInNlbnQiLCJxdWVyeSIsImFmZmVjdGVkUm93cyIsImNoYW5nZWRSb3dzIiwicmVsZWFzZSIsImpzb24iLCJzdWNjZXNzIiwiRXJyb3IiLCJ0MCIsImNvbnNvbGUiLCJsb2ciLCJzdG9wIiwidGhpcyIsIl9jYWxsZWUyIiwiX2NvbnRleHQyIiwibGVuZ3RoIiwicmVxdWlyZSJdLCJtYXBwaW5ncyI6ImdlQUlPLFFBQUFBLEdBQW1DQyxFQUFLQyxFQUFNQyxFQUFNQyxFQUFPQyxHQUEzRCxHQUFBQyxHQUFBQyxFQUFBQyxDQUFBLE9BQUFDLG9CQUFBQyxLQUFBLFNBQUFDLEdBQUEsT0FBQSxPQUFBQSxFQUFBQyxLQUFBRCxFQUFBUixNQUFBLElBQUEsR0FBQSxNQUFBUSxHQUFBQyxLQUFBLEVBR0NOLEVBQVVPLElBQUlDLE9BQU9WLEVBQU9XLFFBSDdCSixFQUFBUixLQUFBLEVBQUFhLEtBQUFDLGVBQUEsS0FBQSxHQUFBLE1BQUFWLEdBQUFJLEVBQUFPLEtBQUFQLEVBQUFSLEtBQUEsRUFBQUksRUFBQVksTUFBQWxCLEVBQUFDLEVBQUEsS0FBQSxHQUFBLEdBQUFNLEVBQUFHLEVBQUFPLE9BQUFWLEVBQUFZLGFBQUEsR0FBQSxDQUFBVCxFQUFBUixLQUFBLEVBQUEsT0FBQSxLQUFBSyxFQUFBYSxZQUFBLEdBQUEsQ0FBQVYsRUFBQVIsS0FBQSxFQUFBLE9BQUFJLEVBQUFBLFdBQUFlLFVBQUFqQixFQUFBa0IsTUFBQUMsU0FBQSxJQUFBYixFQUFBUixLQUFBLEVBQUEsTUFBQSxLQUFBLElBQUEsS0FBQSxJQUFBc0IsT0FBQSxZQUFBLEtBQUEsSUFBQWQsRUFBQVIsS0FBQSxFQUFBLE1BQUEsS0FBQSxJQUFBLEtBQUEsSUFBQXNCLE9BQUEsZUFBQSxLQUFBLElBQUFkLEVBQUFSLEtBQUEsRUFBQSxNQUFBLEtBQUEsSUFBQVEsRUFBQUMsS0FBQSxHQUFBRCxFQUFBZSxHQUFBZixFQUFBLE1BQUEsR0FBQWdCLFFBQUFDLElBQUFqQixFQUFBZSxJQWtCSHZCLEVBQUFBLEVBQUFBLEdBbEJHLEtBQUEsSUFBQSxJQUFBLE1BQUEsTUFBQVEsR0FBQWtCLFNBQUE3QixFQUFBOEIsT0FBQSxFQUFBLDRLQUFBLFFBQUFDLEdBTUM5QixFQU5EQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUFBLEdBQUFDLEdBQUFDLEVBQUFDLENBQUEsT0FBQUMsb0JBQUFDLEtBQUEsU0FBQXNCLEdBQUEsT0FBQSxPQUFBQSxFQUFBcEIsS0FBQW9CLEVBQUE3QixNQUFBLElBQUEsR0FBQSxNQUFBNkIsR0FBQXBCLEtBQUEsRUFBQU4sRUFBQU8sSUFBQUMsT0FBQVYsRUFBQVcsUUFBQWlCLEVBQUE3QixLQUFBLEVBMEJzQmEsS0FBS0MsZUExQjNCLEtBQUEsR0FBQSxNQTBCR1YsR0ExQkh5QixFQUFBZCxLQUFBYyxFQUFBN0IsS0FBQSxFQU9Va0IsRUFBUEYsTUFQSGxCLEVBQUFDLEVBQUEsS0FBQSxHQUFBLEdBQUFNLEVBQUF3QixFQUFBZCxPQUFBVixFQUFBeUIsT0FBQSxHQUFBLENBQUFELEVBQUE3QixLQUFBLEVBQUEsT0FBQUUsRUFBQWtCLEtBQUFmLEdBQUF3QixFQUFBN0IsS0FBQSxFQUFBLE1BQUEsS0FBQSxJQUFBLEtBK0JLLElBQUlzQixPQUFNLGVBL0JmLEtBQUEsSUFBQU8sRUFBQTdCLEtBQUEsRUFBQSxNQUFBLEtBQUEsSUFBQTZCLEVBQUFwQixLQUFBLEdBQUFvQixFQUFBTixHQUFBTSxFQUFBLE1BQUEsR0FTQzNCLFFBQUFBLElBQUFBLEVBQUFBLElBVERGLEVBQUFBLEVBQUFBLEdBQUEsS0FBQSxJQUFBLElBQUEsTUFBQSxNQUFBNkIsR0FBQUgsU0FBQUUsRUFBQUQsT0FBQSxFQUFBLHVFQUpIZCxLQUFPa0IsUUFBUSxpQkFDZnJCLElBQU1xQixRQUFRLGdCQUNkbkIsT0FBU21CLFFBQVEiLCJmaWxlIjoiZGIvaW50ZXJhY3Rpb24vZ2VuZXJhbC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBwb29sID0gcmVxdWlyZSgnLi4vY29ubmVjdC5qcycpO1xudmFyIGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xudmFyIHNlY3JldCA9IHJlcXVpcmUoJy4uLy4uL2dlbmVyYWwvand0U2VjcmV0LmpzJyk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdGFuZGFyZFVwZGF0ZVF1ZXJ5KFNRTCwgZGF0YSwgbmV4dCwgdG9rZW4sIHJlcykge1xuICBcbiAgdHJ5IHtcbiAgICB2YXIgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHNlY3JldCk7XG4gICAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoU1FMLCBkYXRhKTtcbiAgICBpZiAocmVzdWx0LmFmZmVjdGVkUm93cyA+IDApIHsgLy8gZXhpc3RzXG4gICAgICBpZiAocmVzdWx0LmNoYW5nZWRSb3dzID4gMCkgeyAvLyBjaGFuZ2VkIHF1YW50aXR5XG4gICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICAgIHJlcy5qc29uKHtzdWNjZXNzOiB0cnVlfSk7XG4gICAgICB9IGVsc2UgeyAvLyBleGlzdHMgYnV0IG5vIGNoYW5nZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIENoYW5nZScpXG4gICAgICB9XG4gICAgfSBlbHNlIHsgLy8gZG9lcyBub3QgZXhpc3RcbiAgICAgIHRocm93IG5ldyBFcnJvcignSUQgTm90IEZvdW5kJyk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSk7XG4gICAgbmV4dChlKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RhbmRhcmRHZXRRdWVyeShTUUwsIGRhdGEsIG5leHQsIHRva2VuLCByZXMpIHtcblxuICB0cnkge1xuICAgIHZhciBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgc2VjcmV0KTtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeShTUUwsIGRhdGEpO1xuICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgcmVzLmpzb24ocmVzdWx0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJRCBOb3QgRm91bmQnKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKTtcbiAgICBuZXh0KGUpO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

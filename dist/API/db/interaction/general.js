"use strict";function _asyncToGenerator(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(o,a){try{var s=r[o](a),c=s.value}catch(e){return void t(e)}return s.done?void e(c):Promise.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}Object.defineProperty(exports,"__esModule",{value:!0});var standardInsertQuery=exports.standardInsertQuery=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t,n,o){var a,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=jwt.verify(o,secret),e.next=4,pool.getConnection();case 4:return s=e.sent,e.next=7,s.query(r,a.user_id);case 7:return c=e.sent,e.abrupt("return",c);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),n(e.t0);case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(r,t,n,o){return e.apply(this,arguments)}}(),standardUpdateQuery=exports.standardUpdateQuery=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t,n,o,a){var s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=jwt.verify(o,secret),e.next=4,pool.getConnection();case 4:return c=e.sent,e.next=7,c.query(r,t);case 7:if(u=e.sent,!(u.affectedRows>0)){e.next=17;break}if(!(u.changedRows>0)){e.next=14;break}c.connection.release(),a.json({success:!0}),e.next=15;break;case 14:throw new Error("No Change");case 15:e.next=18;break;case 17:throw new Error("ID Not Found");case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0),n(e.t0);case 24:case"end":return e.stop()}},e,this,[[0,20]])}));return function(r,t,n,o,a){return e.apply(this,arguments)}}(),standardGetQueryToken=exports.standardGetQueryToken=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t,n){var o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=jwt.verify(n,secret),console.log(o),e.next=5,pool.getConnection();case 5:return a=e.sent,e.next=8,a.query(r,o.user_id);case 8:if(s=e.sent,!(s.length>0)){e.next=13;break}return e.abrupt("return",{success:!0,data:s});case 13:return e.abrupt("return",{success:!1});case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0),t(e.t0);case 20:case"end":return e.stop()}},e,this,[[0,16]])}));return function(r,t,n){return e.apply(this,arguments)}}(),standardRequiredLengthGetQuery=exports.standardRequiredLengthGetQuery=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t,n,o,a){var s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=jwt.verify(o,secret),console.log("Decoded",s),e.next=5,pool.getConnection();case 5:return c=e.sent,e.next=8,c.query(r,t);case 8:if(u=e.sent,!(u.length>0)){e.next=13;break}a.json(u),e.next=14;break;case 13:throw new Error("ID Not Found");case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0),n(e.t0);case 20:case"end":return e.stop()}},e,this,[[0,16]])}));return function(r,t,n,o,a){return e.apply(this,arguments)}}(),pool=require("../connect.js"),jwt=require("jsonwebtoken"),secret=require("../../general/jwtSecret.js");
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiL2ludGVyYWN0aW9uL2dlbmVyYWwuanMiXSwibmFtZXMiOlsiX2NhbGxlZSIsIlNRTCIsImRhdGEiLCJuZXh0IiwidG9rZW4iLCJkZWNvZGVkIiwiY29ubmVjdGlvbiIsInJlc3VsdCIsInJlZ2VuZXJhdG9yUnVudGltZSIsIndyYXAiLCJfY29udGV4dCIsInByZXYiLCJqd3QiLCJ2ZXJpZnkiLCJzZWNyZXQiLCJwb29sIiwiZ2V0Q29ubmVjdGlvbiIsInNlbnQiLCJxdWVyeSIsInVzZXJfaWQiLCJhYnJ1cHQiLCJ0MCIsImNvbnNvbGUiLCJsb2ciLCJzdG9wIiwidGhpcyIsIl9jYWxsZWUyIiwicmVzIiwiX2NvbnRleHQyIiwiYWZmZWN0ZWRSb3dzIiwiY2hhbmdlZFJvd3MiLCJyZWxlYXNlIiwianNvbiIsInN1Y2Nlc3MiLCJFcnJvciIsIl9jYWxsZWUzIiwiX2NvbnRleHQzIiwic3RhbmRhcmRJbnNlcnRRdWVyeSIsImxlbmd0aCIsIl9jYWxsZWU0IiwiX2NvbnRleHQ0IiwicmVxdWlyZSJdLCJtYXBwaW5ncyI6ImdlQUlPLFFBQUFBLEdBQW1DQyxFQUFLQyxFQUFNQyxFQUFNQyxHQUFwRCxHQUFBQyxHQUFBQyxFQUFBQyxDQUFBLE9BQUFDLG9CQUFBQyxLQUFBLFNBQUFDLEdBQUEsT0FBQSxPQUFBQSxFQUFBQyxLQUFBRCxFQUFBUCxNQUFBLElBQUEsR0FBQSxNQUFBTyxHQUFBQyxLQUFBLEVBRUNOLEVBQVVPLElBQUlDLE9BQU9ULEVBQU9VLFFBRjdCSixFQUFBUCxLQUFBLEVBR3NCWSxLQUFLQyxlQUgzQixLQUFBLEdBQUEsTUFHR1YsR0FISEksRUFBQU8sS0FBQVAsRUFBQVAsS0FBQSxFQUFBRyxFQUFBWSxNQUFBakIsRUFBQUksRUFBQWMsUUFBQSxLQUFBLEdBQUEsTUFBQVosR0FBQUcsRUFBQU8sS0FBQVAsRUFBQVUsT0FBQSxTQUFBYixFQUFBLEtBQUEsSUFBQUcsRUFBQUMsS0FBQSxHQUFBRCxFQUFBVyxHQUFBWCxFQUFBLE1BQUEsR0FB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VCxFQUFBVSxRQUtHUCxRQUFBQSxJQUFBQSxVQUxIRixHQUFBbUMsRUFBQXJDLEtBQUEsRUFrRHNCWSxLQUFLQyxlQWxEM0IsS0FBQSxHQUFBLE1Ba0RHVixHQWxESGtDLEVBQUF2QixLQUFBdUIsRUFBQXJDLEtBQUEsRUFNUTBCLEVBQUFBLE1BTlI1QixFQUFBQyxFQUFBLEtBQUEsR0FBQSxHQUFBSyxFQUFBaUMsRUFBQXZCLE9BQUFWLEVBQUErQixPQUFBLEdBQUEsQ0FBQUUsRUFBQXJDLEtBQUEsRUFBQSxPQUFBd0IsRUFBQUssS0FBQXpCLEdBQUFpQyxFQUFBckMsS0FBQSxFQUFBLE1BQUEsS0FBQSxJQUFBLEtBdURLLElBQUkrQixPQUFNLGVBdkRmLEtBQUEsSUFBQU0sRUFBQXJDLEtBQUEsRUFBQSxNQUFBLEtBQUEsSUFBQXFDLEVBQUE3QixLQUFBLEdBQUE2QixFQUFBbkIsR0FBQW1CLEVBQUEsTUFBQSxHQUFBbEIsUUFBQUMsSUFBQWlCLEVBQUFuQixJQUFBbEIsRUFBQUEsRUFBQUEsR0FBQSxLQUFBLElBQUEsSUFBQSxNQUFBLE1BQUFxQyxHQUFBaEIsU0FBQWUsRUFBQWQsT0FBQSxFQUFBLHVFQWhCSFYsS0FBTzBCLFFBQVEsaUJBQ2Y3QixJQUFNNkIsUUFBUSxnQkFDZDNCLE9BQVMyQixRQUFRIiwiZmlsZSI6ImRiL2ludGVyYWN0aW9uL2dlbmVyYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcG9vbCA9IHJlcXVpcmUoJy4uL2Nvbm5lY3QuanMnKTtcbnZhciBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcbnZhciBzZWNyZXQgPSByZXF1aXJlKCcuLi8uLi9nZW5lcmFsL2p3dFNlY3JldC5qcycpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RhbmRhcmRJbnNlcnRRdWVyeShTUUwsIGRhdGEsIG5leHQsIHRva2VuKSB7XG4gIHRyeSB7XG4gICAgdmFyIGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBzZWNyZXQpO1xuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFNRTCwgZGVjb2RlZC51c2VyX2lkKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSk7XG4gICAgbmV4dChlKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RhbmRhcmRVcGRhdGVRdWVyeShTUUwsIGRhdGEsIG5leHQsIHRva2VuLCByZXMpIHtcblxuICB0cnkge1xuICAgIHZhciBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgc2VjcmV0KTtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeShTUUwsIGRhdGEpO1xuICAgIGlmIChyZXN1bHQuYWZmZWN0ZWRSb3dzID4gMCkgeyAvLyBleGlzdHNcbiAgICAgIGlmIChyZXN1bHQuY2hhbmdlZFJvd3MgPiAwKSB7IC8vIGNoYW5nZWQgcXVhbnRpdHlcbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgICAgcmVzLmpzb24oe3N1Y2Nlc3M6IHRydWV9KTtcbiAgICAgIH0gZWxzZSB7IC8vIGV4aXN0cyBidXQgbm8gY2hhbmdlXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gQ2hhbmdlJylcbiAgICAgIH1cbiAgICB9IGVsc2UgeyAvLyBkb2VzIG5vdCBleGlzdFxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJRCBOb3QgRm91bmQnKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKTtcbiAgICBuZXh0KGUpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdGFuZGFyZEdldFF1ZXJ5VG9rZW4oU1FMLCBuZXh0LCB0b2tlbikge1xuICB0cnkge1xuICAgIHZhciBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgc2VjcmV0KTtcbiAgICBjb25zb2xlLmxvZyhkZWNvZGVkKTtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgbGV0IHJlc3VsdCA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoU1FMLCBkZWNvZGVkLnVzZXJfaWQpO1xuICAvLyAgY29uc29sZS5sb2coXCJSRVNVTFQgZ2V0UVwiLCByZXN1bHQpO1xuICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogcmVzdWx0XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZVxuICAgICAgfTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKTtcbiAgICBuZXh0KGUpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdGFuZGFyZFJlcXVpcmVkTGVuZ3RoR2V0UXVlcnkoU1FMLCBkYXRhLCBuZXh0LCB0b2tlbiwgcmVzKSB7XG5cbiAgdHJ5IHtcbiAgICB2YXIgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIHNlY3JldCk7XG4gICAgY29uc29sZS5sb2coXCJEZWNvZGVkXCIsIGRlY29kZWQpO1xuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFNRTCwgZGF0YSk7XG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICByZXMuanNvbihyZXN1bHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lEIE5vdCBGb3VuZCcpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIG5leHQoZSk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==

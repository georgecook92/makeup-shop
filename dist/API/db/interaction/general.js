"use strict";function _asyncToGenerator(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(a,o){try{var s=r[a](o),c=s.value}catch(e){return void t(e)}return s.done?void e(c):Promise.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}Object.defineProperty(exports,"__esModule",{value:!0});var standardInsertQuery=exports.standardInsertQuery=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t,n,a){var o,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=jwt.verify(a,secret),e.next=4,pool.getConnection();case 4:return s=e.sent,e.next=7,s.query(r,o.user_id);case 7:return c=e.sent,s.connection.release(),e.abrupt("return",c);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),n(e.t0);case 16:case"end":return e.stop()}},e,this,[[0,12]])}));return function(r,t,n,a){return e.apply(this,arguments)}}(),standardUpdateQuery=exports.standardUpdateQuery=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t,n,a,o){var s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=jwt.verify(a,secret),e.next=4,pool.getConnection();case 4:return c=e.sent,e.next=7,c.query(r,t);case 7:if(u=e.sent,!(u.affectedRows>0)){e.next=18;break}if(!(u.changedRows>0)){e.next=14;break}c.connection.release(),o.json({success:!0}),e.next=16;break;case 14:throw c.connection.release(),new Error("No Change");case 16:e.next=20;break;case 18:throw c.connection.release(),new Error("ID Not Found");case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0),n(e.t0);case 26:case"end":return e.stop()}},e,this,[[0,22]])}));return function(r,t,n,a,o){return e.apply(this,arguments)}}(),standardGetQueryToken=exports.standardGetQueryToken=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t,n){var a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=jwt.verify(n,secret),e.next=4,pool.getConnection();case 4:return o=e.sent,e.next=7,o.query(r,a.user_id);case 7:if(s=e.sent,!(s.length>0)){e.next=13;break}return o.connection.release(),e.abrupt("return",{success:!0,data:s});case 13:return o.connection.release(),e.abrupt("return",{success:!0,data:[]});case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0),t(e.t0);case 21:case"end":return e.stop()}},e,this,[[0,17]])}));return function(r,t,n){return e.apply(this,arguments)}}(),standardRequiredLengthGetQuery=exports.standardRequiredLengthGetQuery=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t,n,a,o){var s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pool.getConnection();case 3:return s=e.sent,e.next=6,s.query(r,t);case 6:if(c=e.sent,!(c.length>0)){e.next=12;break}s.connection.release(),o.json(c),e.next=14;break;case 12:throw s.connection.release(),new Error("ID Not Found");case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0),n(e.t0);case 20:case"end":return e.stop()}},e,this,[[0,16]])}));return function(r,t,n,a,o){return e.apply(this,arguments)}}(),standardGetQuery=exports.standardGetQuery=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(r,t,n){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pool.getConnection();case 3:return a=e.sent,e.next=6,a.query(r,t);case 6:return o=e.sent,a.connection.release(),e.abrupt("return",o);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),n(e.t0);case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return function(r,t,n){return e.apply(this,arguments)}}(),pool=require("../connect.js"),jwt=require("jsonwebtoken"),secret=require("../../jwtSecret.js");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiL2ludGVyYWN0aW9uL2dlbmVyYWwuanMiXSwibmFtZXMiOlsiX2NhbGxlZSIsIlNRTCIsImRhdGEiLCJuZXh0IiwidG9rZW4iLCJkZWNvZGVkIiwiY29ubmVjdGlvbiIsInJlc3VsdCIsInJlZ2VuZXJhdG9yUnVudGltZSIsIndyYXAiLCJfY29udGV4dCIsInByZXYiLCJqd3QiLCJ2ZXJpZnkiLCJzZWNyZXQiLCJwb29sIiwiZ2V0Q29ubmVjdGlvbiIsInNlbnQiLCJxdWVyeSIsInVzZXJfaWQiLCJyZWxlYXNlIiwiYWJydXB0IiwidDAiLCJjb25zb2xlIiwibG9nIiwic3RvcCIsInRoaXMiLCJfY2FsbGVlMiIsInJlcyIsIl9jb250ZXh0MiIsImFmZmVjdGVkUm93cyIsIkVycm9yIiwiX2NhbGxlZTMiLCJfY29udGV4dDMiLCJzdGFuZGFyZEluc2VydFF1ZXJ5IiwibGVuZ3RoIiwic3VjY2VzcyIsIl9jYWxsZWU0IiwiX2NvbnRleHQ0IiwianNvbiIsImNoYW5nZWRSb3dzIiwiX2NhbGxlZTUiLCJfY29udGV4dDUiLCJyZXF1aXJlIl0sIm1hcHBpbmdzIjoiZ2VBSU8sUUFBQUEsR0FBbUNDLEVBQUtDLEVBQU1DLEVBQU1DLEdBQXBELEdBQUFDLEdBQUFDLEVBQUFDLENBQUEsT0FBQUMsb0JBQUFDLEtBQUEsU0FBQUMsR0FBQSxPQUFBLE9BQUFBLEVBQUFDLEtBQUFELEVBQUFQLE1BQUEsSUFBQSxHQUFBLE1BQUFPLEdBQUFDLEtBQUEsRUFFQ04sRUFBVU8sSUFBSUMsT0FBT1QsRUFBT1UsUUFGN0JKLEVBQUFQLEtBQUEsRUFHc0JZLEtBQUtDLGVBSDNCLEtBQUEsR0FBQSxNQUdHVixHQUhISSxFQUFBTyxLQUFBUCxFQUFBUCxLQUFBLEVBQUFHLEVBQUFZLE1BQUFqQixFQUFBSSxFQUFBYyxRQUFBLEtBQUEsR0FBQSxNQUFBWixHQUFBRyxFQUFBTyxLQUFBWCxFQUFBQSxXQUFBYyxVQUFBVixFQUFBVyxPQUFBLFNBQUFkLEVBQUEsS0FBQSxJQUFBRyxF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RUFBQUEsV0FZV3lCLFVBWlhXLEVBQUFyQixPQUFBLFNBd0VJZCxFQXhFSixLQUFBLElBQUFtQyxFQUFBL0IsS0FBQSxHQUFBK0IsRUFBQXBCLEdBQUFvQixFQUFBLE1BQUEsR0FBQW5CLFFBQUFDLElBQUFrQixFQUFBcEIsSUFBQW5CLEVBQUFBLEVBQUFBLEdBQUEsS0FBQSxJQUFBLElBQUEsTUFBQSxNQUFBdUMsR0FBQWpCLFNBQUFnQixFQUFBZixPQUFBLEVBQUEsbUVBakJIWCxLQUFPNEIsUUFBUSxpQkFDZi9CLElBQU0rQixRQUFRLGdCQUNkN0IsT0FBUzZCLFFBQVEiLCJmaWxlIjoiZGIvaW50ZXJhY3Rpb24vZ2VuZXJhbC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBwb29sID0gcmVxdWlyZSgnLi4vY29ubmVjdC5qcycpO1xudmFyIGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xudmFyIHNlY3JldCA9IHJlcXVpcmUoJy4uLy4uL2p3dFNlY3JldC5qcycpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RhbmRhcmRJbnNlcnRRdWVyeShTUUwsIGRhdGEsIG5leHQsIHRva2VuKSB7XG4gIHRyeSB7XG4gICAgdmFyIGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBzZWNyZXQpO1xuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFNRTCwgZGVjb2RlZC51c2VyX2lkKTtcbiAgICBjb25uZWN0aW9uLmNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKTtcbiAgICBuZXh0KGUpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdGFuZGFyZFVwZGF0ZVF1ZXJ5KFNRTCwgZGF0YSwgbmV4dCwgdG9rZW4sIHJlcykge1xuXG4gIHRyeSB7XG4gICAgdmFyIGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBzZWNyZXQpO1xuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFNRTCwgZGF0YSk7XG4gICAgaWYgKHJlc3VsdC5hZmZlY3RlZFJvd3MgPiAwKSB7IC8vIGV4aXN0c1xuICAgICAgaWYgKHJlc3VsdC5jaGFuZ2VkUm93cyA+IDApIHsgLy8gY2hhbmdlZCBxdWFudGl0eVxuICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgICByZXMuanNvbih7c3VjY2VzczogdHJ1ZX0pO1xuICAgICAgfSBlbHNlIHsgLy8gZXhpc3RzIGJ1dCBubyBjaGFuZ2VcbiAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBDaGFuZ2UnKVxuICAgICAgfVxuICAgIH0gZWxzZSB7IC8vIGRvZXMgbm90IGV4aXN0XG4gICAgICBjb25uZWN0aW9uLmNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJRCBOb3QgRm91bmQnKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKTtcbiAgICBuZXh0KGUpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdGFuZGFyZEdldFF1ZXJ5VG9rZW4oU1FMLCBuZXh0LCB0b2tlbikge1xuICB0cnkge1xuICAgIHZhciBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgc2VjcmV0KTtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XG4gICAgbGV0IHJlc3VsdCA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoU1FMLCBkZWNvZGVkLnVzZXJfaWQpO1xuICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgY29ubmVjdGlvbi5jb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHJlc3VsdFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29ubmVjdGlvbi5jb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IFtdXG4gICAgICB9O1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIG5leHQoZSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0YW5kYXJkUmVxdWlyZWRMZW5ndGhHZXRRdWVyeShTUUwsIGRhdGEsIG5leHQsIHRva2VuLCByZXMpIHtcblxuICB0cnkge1xuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFNRTCwgZGF0YSk7XG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICBjb25uZWN0aW9uLmNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgcmVzLmpzb24ocmVzdWx0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29ubmVjdGlvbi5jb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSUQgTm90IEZvdW5kJyk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSk7XG4gICAgbmV4dChlKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RhbmRhcmRHZXRRdWVyeShTUUwsIGRhdGEsIG5leHQpIHtcblxuICB0cnkge1xuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFNRTCwgZGF0YSk7XG4gICAgY29ubmVjdGlvbi5jb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5sb2coZSk7XG4gICAgbmV4dChlKTtcbiAgfVxufVxuIl19

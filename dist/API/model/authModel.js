"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,o,t){return o&&e(n.prototype,o),t&&e(n,t),n}}(),_email=require("../email/email.js"),_email2=_interopRequireDefault(_email),bcrypt=require("bcrypt"),pool=require("../../../db/connect.js"),saltRounds=10,AuthModel=function(){function e(n,o,t,r){_classCallCheck(this,e),this.sql=n,this.data=o,this.res=t,this.next=r}return _createClass(e,[{key:"confirmUser",value:function(){var e=this;pool.getConnection().then(function(n){return n.query(e.sql,[e.data.token]).then(function(o){if(console.log("result",o),!(o.affectedRows>0))throw n.connection.release(),new Error("Not Exist");n.connection.release(),e.res.status(200).json({success:!0})})}).catch(function(n){console.log(n),e.next(n)})}},{key:"register",value:function(){var e=this,n=this.data,o=n.email,t=n.password,r=n.first_name,s=n.last_name,a=n.phone,l={email:o,password:t,first_name:r,last_name:s,phone:a};try{if(!(o&&t&&r&&s&&a))throw console.log("error - not all fields"),new Error("Provide All Fields");pool.getConnection().then(function(n){return n.query(e.sql,[e.data.email]).then(function(n){if(n.length>0)throw new Error("Exists");try{bcrypt.genSalt(saltRounds,function(n,o){if(n)throw new Error(n);bcrypt.hash(e.data.password,o,function(n,o){if(n)throw new Error(n);return e.data.password=o,pool.getConnection().then(function(n){return n.query("INSERT INTO _users SET ?",l).then(function(o){var t="www.testsite.com",r="You are receiving this because you (or someone else) have signed up to the website.\n\n Please click on the following link, or paste this into your browser to completethe process:\n\n"+t+"/confirmEmail/token \n\n Once you have confirmed your account, you will be able to login.\n",s=new _email2.default(e.data.email,"userconfirmation@makeup.com","Confirm Account",r,e.res);s.sendTokenEmail(),n.connection.release()})})})})}catch(n){console.log(n),e.next(n)}})}).catch(function(n){console.log(n),e.next(n)})}catch(e){console.log(e),this.next(e)}}},{key:"login",value:function(){var e=this;pool.getConnection().then(function(n){return n.query(e.sql,[e.data.email]).then(function(o){o.length>0&&(console.log(o),bcrypt.compare(e.data.password,o[0].password,function(t,r){try{if(t)throw n.connection.release(),console.log(t),new Error(t);if(!r)throw console.log("wrong."),n.connection.release(),new Error("Incorrect Password");console.log("correct."),n.connection.release(),console.log(o[0]),e.res.status(200).json({email:o[0].email,first_name:o[0].first_name,last_name:o[0].last_name,phone:o[0].phone})}catch(n){console.log(n),e.next(n)}}))}).catch(function(n){console.log(n),e.next(n)})})}}]),e}();exports.default=AuthModel;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVsL2F1dGhNb2RlbC5qcyJdLCJuYW1lcyI6WyJfZW1haWwiLCJyZXF1aXJlIiwiYmNyeXB0IiwicG9vbCIsInNhbHRSb3VuZHMiLCJBdXRoTW9kZWwiLCJzcWwiLCJkYXRhIiwicmVzIiwibmV4dCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfdGhpcyIsImdldENvbm5lY3Rpb24iLCJ0aGVuIiwiY29ubmVjdGlvbiIsInF1ZXJ5IiwidG9rZW4iLCJyZXN1bHQiLCJhZmZlY3RlZFJvd3MiLCJyZWxlYXNlIiwiRXJyb3IiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsIl90aGlzMiIsIl9kYXRhIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsInBob25lIiwidXNlciIsImVtYWlsIiwiZ2VuU2FsdCIsInNhbHQiLCJoYXNoIiwicGFzc3dvcmQiLCJjb25uIiwidXJsIiwicmVnaXN0ZXJFbWFpbENvbnRlbnQiLCJzZW5kVG9rZW5FbWFpbCIsImxlbmd0aCIsImUiLCJfdGhpczMiLCJjb21wYXJlIiwiY29tcGFyaXNvblZhbHVlIl0sIm1hcHBpbmdzIjoiNGZBR0FBLE9BQUFDLFFBQUEsNERBSElDLE9BQVNELFFBQVEsVUFDakJFLEtBQU9GLFFBQVEsMEJBQ2JHLFdBQWEsR0FHRUMscUJBRW5CLFFBQUFBLEdBQVlDLEVBQUtDLEVBQU1DLEVBQUtDLEdBQU1DLGdCQUFBQyxLQUFBTixHQUpwQ00sS0FBQUwsSUFBQUEsRUFNSUssS0FBS0osS0FBT0EsRUFDWkksS0FBS0gsSUFBTUEsRUFDWEcsS0FBS0YsS0FBT0EsNkRBR0EsR0FBQUcsR0FBQUQsSUFDWlIsTUFBS1UsZ0JBQWdCQyxLQUFLLFNBQUFDLEdBZjFCYixNQUFTRCxHQUFRZSxNQUFyQkosRUFBQU4sS0FBQU0sRUFBQUwsS0FBQVUsUUFBQUgsS0FBQSxTQUFBSSxHQUVNZCxHQURGRCxRQUFPRixJQUFRLFNBQUFpQixLQUNiZCxFQUFOZSxh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akIsRUFBQUEsS0FBWVQsU0FLTkgsTUFBQUEsU0FBQUEsR0FDQVksUUFBQUEsSUFBQUEsR0FDQW1CLEVBQUFyQyxLQUFBaUIsZ0NBbEdLckIiLCJmaWxlIjoibW9kZWwvYXV0aE1vZGVsLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdCcpO1xudmFyIHBvb2wgPSByZXF1aXJlKCcuLi8uLi8uLi9kYi9jb25uZWN0LmpzJyk7XG5jb25zdCBzYWx0Um91bmRzID0gMTA7XG5pbXBvcnQgRW1haWwgZnJvbSAnLi4vZW1haWwvZW1haWwuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdXRoTW9kZWwge1xuXG4gIGNvbnN0cnVjdG9yKHNxbCwgZGF0YSwgcmVzLCBuZXh0KSB7XG4gICAgdGhpcy5zcWwgPSBzcWw7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLnJlcyA9IHJlcztcbiAgICB0aGlzLm5leHQgPSBuZXh0O1xuICB9XG5cbiAgY29uZmlybVVzZXIoKSB7XG4gICAgcG9vbC5nZXRDb25uZWN0aW9uKCkudGhlbihjb25uZWN0aW9uID0+IHtcbiAgICAgIHJldHVybiBjb25uZWN0aW9uLnF1ZXJ5KHRoaXMuc3FsLCBbdGhpcy5kYXRhLnRva2VuXSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0JywgcmVzdWx0KTtcbiAgICAgICAgaWYgKHJlc3VsdC5hZmZlY3RlZFJvd3MgPiAwKSB7XG4gICAgICAgICAgLy8gIGhvdyB0aGUgbXlzcWwgbGlicmFyeSBpcyB3cmFwcGVkIC0gc3RhY2tvdmVyZmxvd1xuICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICAgICAgdGhpcy5yZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICBcInN1Y2Nlc3NcIjogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vICBob3cgdGhlIG15c3FsIGxpYnJhcnkgaXMgd3JhcHBlZCAtIHN0YWNrb3ZlcmZsb3dcbiAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IEV4aXN0Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgdGhpcy5uZXh0KGVycik7XG4gICAgfSk7XG4gIH1cblxuICByZWdpc3RlcigpIHtcbiAgICB2YXIge2VtYWlsLCBwYXNzd29yZCwgZmlyc3RfbmFtZSwgbGFzdF9uYW1lLCBwaG9uZX0gPSB0aGlzLmRhdGE7XG4gICAgdmFyIHVzZXIgPSB7ZW1haWwsIHBhc3N3b3JkLCBmaXJzdF9uYW1lLCBsYXN0X25hbWUsIHBob25lfTtcbiAgICB0cnkge1xuICAgICAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQgfHwgIWZpcnN0X25hbWUgfHwgIWxhc3RfbmFtZSB8fCAhcGhvbmUpIHtcbiAgICAgICAgLy8gdG8gZG8gd2l0aCB0aGUgbm9kZS1teXNxbCBsaWJyYXJ5XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciAtIG5vdCBhbGwgZmllbGRzJyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUHJvdmlkZSBBbGwgRmllbGRzJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwb29sLmdldENvbm5lY3Rpb24oKS50aGVuKGNvbm5lY3Rpb24gPT4ge1xuICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uLnF1ZXJ5KHRoaXMuc3FsLCBbdGhpcy5kYXRhLmVtYWlsXSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXhpc3RzJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGJjcnlwdC5nZW5TYWx0KHNhbHRSb3VuZHMsIChlcnIsIHNhbHQpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBiY3J5cHQuaGFzaCh0aGlzLmRhdGEucGFzc3dvcmQsIHNhbHQsIChlcnIsIGhhc2gpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5wYXNzd29yZCA9IGhhc2g7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvb2wuZ2V0Q29ubmVjdGlvbigpLnRoZW4oY29ubiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29ubi5xdWVyeSgnSU5TRVJUIElOVE8gX3VzZXJzIFNFVCA/JywgdXNlcikudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gJ3d3dy50ZXN0c2l0ZS5jb20nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVnaXN0ZXJFbWFpbENvbnRlbnQgPSAnWW91IGFyZSByZWNlaXZpbmcgdGhpcyBiZWNhdXNlIHlvdSAob3Igc29tZW9uZSBlbHNlKSBoYXZlIHNpZ25lZCB1cCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RvIHRoZSB3ZWJzaXRlLlxcblxcbiBQbGVhc2UgY2xpY2sgb24gdGhlIGZvbGxvd2luZyBsaW5rLCBvciBwYXN0ZSB0aGlzIGludG8geW91ciBicm93c2VyIHRvIGNvbXBsZXRlJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAndGhlIHByb2Nlc3M6XFxuXFxuJyArIHVybCArICcvY29uZmlybUVtYWlsL3Rva2VuIFxcblxcbiBPbmNlIHlvdSBoYXZlIGNvbmZpcm1lZCB5b3VyIGFjY291bnQsJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnIHlvdSB3aWxsIGJlIGFibGUgdG8gbG9naW4uXFxuJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVtYWlsID0gbmV3IEVtYWlsKHRoaXMuZGF0YS5lbWFpbCwgJ3VzZXJjb25maXJtYXRpb25AbWFrZXVwLmNvbScsICdDb25maXJtIEFjY291bnQnLCByZWdpc3RlckVtYWlsQ29udGVudCwgdGhpcy5yZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbC5zZW5kVG9rZW5FbWFpbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uLmNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0KGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICB0aGlzLm5leHQoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICB0aGlzLm5leHQoZSk7XG4gICAgfVxuICB9XG5cbiAgbG9naW4oKSB7XG4gICAgcG9vbC5nZXRDb25uZWN0aW9uKCkudGhlbihjb25uZWN0aW9uID0+IHtcbiAgICAgIHJldHVybiBjb25uZWN0aW9uLnF1ZXJ5KHRoaXMuc3FsLCBbdGhpcy5kYXRhLmVtYWlsXSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgIC8vIExvYWQgaGFzaCBmcm9tIHlvdXIgcGFzc3dvcmQgREIuXG4gICAgICAgICAgYmNyeXB0LmNvbXBhcmUodGhpcy5kYXRhLnBhc3N3b3JkLCByZXN1bHRbMF0ucGFzc3dvcmQsIChlcnIsIGNvbXBhcmlzb25WYWx1ZSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChjb21wYXJpc29uVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY29ycmVjdC4nKTtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uLmNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdFswXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICAgICAgICBlbWFpbDogcmVzdWx0WzBdLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogcmVzdWx0WzBdLmZpcnN0X25hbWUsXG4gICAgICAgICAgICAgICAgICBsYXN0X25hbWU6IHJlc3VsdFswXS5sYXN0X25hbWUsXG4gICAgICAgICAgICAgICAgICBwaG9uZTogcmVzdWx0WzBdLnBob25lXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnd3JvbmcuJyk7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luY29ycmVjdCBQYXNzd29yZCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgICAgIHRoaXMubmV4dChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICB9XG4gICAgICB9KS5jYXRjaCggKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB0aGlzLm5leHQoZXJyKTtcbiAgICAgIH0pO1xuICAgIH0pXG5cbiAgfVxuXG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,i){try{var s=t[a](i),u=s.value}catch(e){return void r(e)}return s.done?void e(u):Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_general=require("../db/interaction/general.js"),Queries=_interopRequireWildcard(_general),pool=require("../db/connect.js"),secret=require("../general/jwtSecret.js"),jwt=require("jsonwebtoken"),ProductsModel=function(){function e(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";_classCallCheck(this,e),this.sql=i,this.data=t,this.res=r,this.next=n,this.token=a}return _createClass(e,[{key:"getAll",value:function(){function e(){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pool.getConnection();case 3:return t=e.sent,e.next=6,t.query(this.sql);case 6:return r=e.sent,t.connection.release(),e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),this.next(e.t0);case 15:case"end":return e.stop()}},e,this,[[0,11]])}));return e}()},{key:"getAllByCat",value:function(){Queries.standardRequiredLengthGetQuery(this.sql,[this.data.categoryId],this.next,this.token,this.res)}},{key:"getProduct",value:function(){Queries.standardRequiredLengthGetQuery(this.sql,[this.data.productId],this.next,this.token,this.res)}},{key:"changeProductQuantity",value:function(){Queries.standardUpdateQuery(this.sql,[this.data.quantity,this.data.productId],this.next,this.res)}},{key:"changeDiscount",value:function(){Queries.standardUpdateQuery(this.sql,[this.data.discount,this.data.productId],this.next,this.res)}},{key:"changePrice",value:function(){Queries.standardUpdateQuery(this.sql,[this.data.price,this.data.productId],this.next,this.res)}}]),e}();exports.default=ProductsModel;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVsL3Byb2R1Y3RzTW9kZWwuanMiXSwibmFtZXMiOlsiX2dlbmVyYWwiLCJyZXF1aXJlIiwiUXVlcmllcyIsInBvb2wiLCJzZWNyZXQiLCJqd3QiLCJQcm9kdWN0c01vZGVsIiwiZGF0YSIsInJlcyIsIm5leHQiLCJ0b2tlbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInNxbCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJnZXRDb25uZWN0aW9uIiwiY29ubmVjdGlvbiIsInF1ZXJ5IiwicmVzdWx0IiwicmVsZWFzZSIsIl9jb250ZXh0IiwidDAiLCJzdGFuZGFyZFJlcXVpcmVkTGVuZ3RoR2V0UXVlcnkiLCJjYXRlZ29yeUlkIiwicHJvZHVjdElkIiwic3RhbmRhcmRVcGRhdGVRdWVyeSIsInF1YW50aXR5IiwiZGlzY291bnQiLCJwcmljZSJdLCJtYXBwaW5ncyI6Imc1QkFDQUEsU0FBQUMsUUFBQSxnQ0FBWUMsMENBRFJDLEtBQU9GLFFBQVEsb0JBRWZHLE9BQVNILFFBQVEsMkJBQ2pCSSxJQUFNSixRQUFRLGdCQUVHSyx5QkFDbkIsUUFBQUEsR0FBWUMsRUFBTUMsRUFBS0MsR0FBNEIsR0FBdEJDLEdBQXNCQyxVQUFBQyxPQUFBLEdBQUFDLFNBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFkLEdBQUlHLEVBQVVILFVBQUFDLE9BQUEsR0FBQUMsU0FBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUosRUFBSUksaUJBQUFDLEtBQUFWLEdBQ2pEVSxLQUFLRixJQUFNQSxFQU5mRSxLQUFBVCxLQUFBQSxFQVFJUyxLQUFLUixJQUFNQSxFQVJITixLQUFBQSxLQVNJTyxFQUNaTyxLQUFLTixNQUFRQSxpUkFLY1AsS0FBS2MsNkJBQXhCQyxtQkFDZUEsRUFBV0MsTUFBTUgsS0FBS0Ysa0JBQXJDTSxVQWpCUmpCLEVBQU9GLFdBQVFvQiw0QkFtQk5ELHFDQWhCVGYsUUFBTUosSUFBTkksRUFBQUEsSUFtQkVXLEtBQUtQLEtBQUxhLEVBQUFDLDZHQUtGckIsUUFBUXNCLCtCQUErQlIsS0FBS0YsS0FBTUUsS0FBS1QsS0FBS2tCLFlBQWFULEtBQUtQLEtBQU1PLEtBQUtOLE1BQU9NLEtBQUtSLDBDQW5CckdOLFFBQUtLLCtCQUFMUyxLQUFBRixLQUFBRSxLQUFBVCxLQUFBbUIsV0FBQVYsS0FBQVAsS0FBQU8sS0FBQU4sTUFBQU0sS0FBQVIscURBNEJBTixRQUFReUIsb0JBQW9CWCxLQUFLRixLQUFNRSxLQUFLVCxLQUFLcUIsU0FBVVosS0FBS1QsS0FBS21CLFdBQVlWLEtBQUtQLEtBQU1PLEtBQUtSLDhDQUlqR04sUUFBUXlCLG9CQUFvQlgsS0FBS0YsS0FBTUUsS0FBS1QsS0FBS3NCLFNBQVViLEtBQUtULEtBQUttQixXQUFZVixLQUFLUCxLQUFNTyxLQUFLUiwyQ0FJakdOLFFBQVF5QixvQkFBb0JYLEtBQUtGLEtBQU1FLEtBQUtULEtBQUt1QixNQUFPZCxLQUFLVCxLQUFLbUIsV0FBWVYsS0FBS1AsS0FBTU8sS0FBS1IsOEJBdkM3RUYiLCJmaWxlIjoibW9kZWwvcHJvZHVjdHNNb2RlbC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBwb29sID0gcmVxdWlyZSgnLi4vZGIvY29ubmVjdC5qcycpO1xuaW1wb3J0ICogYXMgUXVlcmllcyBmcm9tICcuLi9kYi9pbnRlcmFjdGlvbi9nZW5lcmFsLmpzJztcbnZhciBzZWNyZXQgPSByZXF1aXJlKCcuLi9nZW5lcmFsL2p3dFNlY3JldC5qcycpO1xudmFyIGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9kdWN0c01vZGVsIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgcmVzLCBuZXh0LCB0b2tlbiA9ICcnLCBzcWwgPSAnJykge1xuICAgIHRoaXMuc3FsID0gc3FsO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5yZXMgPSByZXM7XG4gICAgdGhpcy5uZXh0ID0gbmV4dDtcbiAgICB0aGlzLnRva2VuID0gdG9rZW47XG4gIH1cblxuICBhc3luYyBnZXRBbGwoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkodGhpcy5zcWwpO1xuICAgICAgY29ubmVjdGlvbi5jb25uZWN0aW9uLnJlbGVhc2UoKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICB0aGlzLm5leHQoZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0QWxsQnlDYXQoKSB7XG4gICAgUXVlcmllcy5zdGFuZGFyZFJlcXVpcmVkTGVuZ3RoR2V0UXVlcnkodGhpcy5zcWwsIFt0aGlzLmRhdGEuY2F0ZWdvcnlJZF0sIHRoaXMubmV4dCwgdGhpcy50b2tlbiwgdGhpcy5yZXMpO1xuICB9XG5cbiAgZ2V0UHJvZHVjdCgpIHtcbiAgICBRdWVyaWVzLnN0YW5kYXJkUmVxdWlyZWRMZW5ndGhHZXRRdWVyeSh0aGlzLnNxbCwgW3RoaXMuZGF0YS5wcm9kdWN0SWRdLCB0aGlzLm5leHQsIHRoaXMudG9rZW4sIHRoaXMucmVzKTtcbiAgfVxuXG4gIC8vIEFETUlOIFBBTkVMIFNUVUZGXG4gIGNoYW5nZVByb2R1Y3RRdWFudGl0eSgpIHtcbiAgICBRdWVyaWVzLnN0YW5kYXJkVXBkYXRlUXVlcnkodGhpcy5zcWwsIFt0aGlzLmRhdGEucXVhbnRpdHksIHRoaXMuZGF0YS5wcm9kdWN0SWRdLCB0aGlzLm5leHQsIHRoaXMucmVzKTtcbiAgfVxuXG4gIGNoYW5nZURpc2NvdW50KCkge1xuICAgIFF1ZXJpZXMuc3RhbmRhcmRVcGRhdGVRdWVyeSh0aGlzLnNxbCwgW3RoaXMuZGF0YS5kaXNjb3VudCwgdGhpcy5kYXRhLnByb2R1Y3RJZF0sIHRoaXMubmV4dCwgdGhpcy5yZXMpO1xuICB9XG5cbiAgY2hhbmdlUHJpY2UoKSB7XG4gICAgUXVlcmllcy5zdGFuZGFyZFVwZGF0ZVF1ZXJ5KHRoaXMuc3FsLCBbdGhpcy5kYXRhLnByaWNlLCB0aGlzLmRhdGEucHJvZHVjdElkXSwgdGhpcy5uZXh0LCB0aGlzLnJlcyk7XG4gIH1cblxufVxuIl19
